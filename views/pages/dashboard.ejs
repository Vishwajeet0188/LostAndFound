<% layout("layouts/boilerplate") %>

<div class="container py-4">
  <!-- Welcome Header -->
  <div class="row mb-4">
    <div class="col-md-8">
      <h1 class="fw-bold">Welcome, <%= user.name %>!</h1>
      <p class="text-muted">Here's your Lost & Found dashboard</p>
    </div>
    <div class="col-md-4 text-end">
      <a href="/items/create" class="btn btn-primary">
        <i class="fas fa-plus me-1"></i> Report Lost Item
      </a>
    </div>
  </div>

      <!-- Flash Messages -->

    <% if (Array.isArray(error_msg) && error_msg.length > 0) { %>
      <div class="alert alert-danger alert-dismissible fade show mb-3" role="alert">
        <%= error_msg[0] %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% } %>

    <% if (Array.isArray(success_msg) && success_msg.length > 0) { %>
      <div class="alert alert-success alert-dismissible fade show mb-3" role="alert">
        <%= success_msg[0] %>
        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
      </div>
    <% } %>


  <!-- Quick Stats -->
  <div class="row mb-5">
    <div class="col-md-3 mb-3">
      <div class="card bg-primary text-white">
        <div class="card-body text-center">
          <h3 class="mb-1"><%= typeof userStats !== 'undefined' ? (userStats.lostItems || 0) : 0 %></h3>
          <p class="mb-0">Lost Items</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-success text-white">
        <div class="card-body text-center">
          <h3 class="mb-1"><%= typeof userStats !== 'undefined' ? (userStats.foundItems || 0) : 0 %></h3>
          <p class="mb-0">Found Items</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-warning text-white">
        <div class="card-body text-center">
          <h3 class="mb-1">â‚¹<%= typeof userStats !== 'undefined' ? (userStats.totalRewards || 0) : 0 %></h3>
          <p class="mb-0">Total Rewards</p>
        </div>
      </div>
    </div>
    <div class="col-md-3 mb-3">
      <div class="card bg-info text-white">
        <div class="card-body text-center">
          <h3 class="mb-1"><%= typeof userStats !== 'undefined' ? (userStats.reportedItems || 0) : 0 %></h3>
          <p class="mb-0">Items Reported</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="row">
    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-bolt me-2"></i> Quick Actions</h5>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a href="/items/create" class="btn btn-primary btn-lg">
              <i class="fas fa-plus me-2"></i> Report Lost Item
            </a>
            <a href="/items/my-items" class="btn btn-outline-primary btn-lg">
              <i class="fas fa-list me-2"></i> View My Items
            </a>
            <a href="/items" class="btn btn-outline-secondary btn-lg">
              <i class="fas fa-search me-2"></i> Browse All Items
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mb-4">
      <div class="card">
        <div class="card-header bg-light">
          <h5 class="mb-0"><i class="fas fa-user me-2"></i> Account Info</h5>
        </div>
        <div class="card-body">
          <table class="table table-borderless">
            <tr>
              <td><strong>Name:</strong></td>
              <td><%= user.name %></td>
            </tr>
            <tr>
              <td><strong>Email:</strong></td>
              <td><%= user.email %></td>
            </tr>
            <tr>
              <td><strong>Member Since:</strong></td>
              <td><%= new Date(user.createdAt).toLocaleDateString() %></td>
            </tr>
            <tr>
              <td><strong>Account Type:</strong></td>
              <td>
                <span class="badge bg-<%= user.role === 'admin' ? 'danger' : 'primary' %>">
                  <%= user.role === 'admin' ? 'Administrator' : 'Standard User' %>
                </span>
              </td>
            </tr>
          </table>
          <div class="mt-3">
            <a href="/profile" class="btn btn-outline-primary w-100">
              <i class="fas fa-user-edit me-1"></i> Edit Profile
            </a>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Activity (Optional - can add later) -->
  <div class="card">
    <div class="card-header bg-light">
      <h5 class="mb-0"><i class="fas fa-history me-2"></i> Getting Started</h5>
    </div>
    <div class="card-body">
      <p class="mb-3">Welcome to Lost & Found! Here are some things you can do:</p>
      <ol class="mb-0">
        <li>Report a lost item by clicking "Report Lost Item"</li>
        <li>Browse all items to see if someone found your lost belongings</li>
        <li>Check "My Items" to see items you've reported</li>
        <li>Update your profile information</li>
      </ol>
    </div>
  </div>
</div>

<style>
  .card {
    border-radius: 12px;
    border: none;
    box-shadow: 0 4px 12px rgba(0,0,0,0.05);
  }
  
  .card-header {
    border-radius: 12px 12px 0 0 !important;
  }
  
  .btn-lg {
    padding: 12px;
    font-weight: 500;
  }
  
  .table tr td {
    padding: 8px 0;
  }
</style>